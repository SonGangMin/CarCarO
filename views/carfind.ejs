<%- include('./include/head.ejs') %>
<style>
  /* .searchbox {
    border: solid 1px black;
    padding: 30px;
  } */
  .select1 {
    margin: 0;
    padding: 20px;
    align-items: center;
    size: 150px;
  }
  .search {
    margin: 0;
    padding-top: 18px;
    padding-bottom: 40px;
    align-items: center;
  }

  .thumbnail {
    width: 100%;
    height: 150px;
  }
  .listbox {
    border: 1px solid black;
    /* background-color: red; */
    width: 100%;
    /* margin: 0 5%; */
  }
  li {
    display: inline-block;
  }
  .bigbox {
      border: solid 1px black;
      padding: 100px;
      position: relative;
      width: 100%;
      display: block;
      /* left: 15%; */
    }

    .statistics {
      text-align: right;
      width: 100%;
    }
    .searchbox {
      width: 100%;
    }
    .bigbox ul {
      display: flex;
      flex-wrap: wrap;
    }
    .bigbox ul li {
      width: 25%;
      padding: 10px 10px;
      text-align: center;
    }
    .bigbox h1 {
      text-align: center;
    }
    
    .text-box{
      margin-bottom: 10px;
      margin-top: -20px;
    }


    .hash {
      width: 25%;
      display: flex;
      display: inline;
      margin: 5%;
    }

    .like {
      position: relative;
      right: -35%;
      top: -40px;
      /* border: solid 1px black; */
    }

    #highlight {
      background-color: lightcoral;
    }
    .check {
      border: 1px solid black;
      box-sizing: border-box;
    }
</style>
<div class="findcar">
  <div class="bigbox" id="search">
    <div class="statistics">
      전체: &nbsp;&nbsp;&nbsp;&nbsp; <%= total %>대<br />최근등록(24시간):
      &nbsp;&nbsp;&nbsp;&nbsp; <%= recenttotal %>대
    </div>
    국산●수입차
    <form action="/car/carfind/search/:result" method="get">
      <div class="searchbox">
        <select class="select1" name="from" id="from">
          <option value="" selected>국산·수입</option>
          <option value="국산">국산</option>
          <option value="수입">수입</option>
        </select>
        <select class="select1" name="brand" id="brand">
          <option value="" selected>국산·수입 선택하세요</option>
        </select>

        <input type="text" name="model" class="select1" placeholder="모델명">
      </div>
        차량 가격 
        <input type="number" class="lowprice" name="lowprice" value="0" required onfocus="if(this.value=='0') this.value='';" onblur="if(this.value=='') this.value='0';">
        원 ~
        <input type="number" class="highprice" name="highprice" value="10000000000" required onfocus="if(this.value=='10000000000') this.value='';" onblur="if(this.value=='') this.value='10000000000';">

        까지 &nbsp;&nbsp;&nbsp;&nbsp; 변속기
        <select name="trans">
          <option value='' selected>전체</option>
          <option value="수동">수동</option>
          <option value="자동">자동</option></select
        ><br />
        차량 연식
        <select name="startyear">
          <option value="0" selected>2000년 이전</option>
          <option value="2001">2001년</option>
          <option value="2002">2002년</option>
          <option value="2003">2003년</option>
          <option value="2004">2004년</option>
          <option value="2005">2005년</option>
          <option value="2006">2006년</option>
          <option value="2007">2007년</option>
          <option value="2008">2008년</option>
          <option value="2009">2009년</option>
          <option value="2010">2010년</option>
          <option value="2011">2011년</option>
          <option value="2012">2012년</option>
          <option value="2013">2013년</option>
          <option value="2014">2014년</option>
          <option value="2015">2015년</option>
          <option value="2016">2016년</option>
          <option value="2017">2017년</option>
          <option value="2018">2018년</option>
          <option value="2019">2019년</option>
          <option value="2020">2020년</option>
          <option value="2021">2021년</option>
          <option value="2022">2022년</option>
          <option value="2023">2023년</option>
        </select>
        부터
        <select name="endyear">
          <option value="2001">2001년</option>
          <option value="2002">2002년</option>
          <option value="2003">2003년</option>
          <option value="2004">2004년</option>
          <option value="2005">2005년</option>
          <option value="2006">2006년</option>
          <option value="2007">2007년</option>
          <option value="2008">2008년</option>
          <option value="2009">2009년</option>
          <option value="2010">2010년</option>
          <option value="2011">2011년</option>
          <option value="2012">2012년</option>
          <option value="2013">2013년</option>
          <option value="2014">2014년</option>
          <option value="2015">2015년</option>
          <option value="2016">2016년</option>
          <option value="2017">2017년</option>
          <option value="2018">2018년</option>
          <option value="2019">2019년</option>
          <option value="2020">2020년</option>
          <option value="2021">2021년</option>
          <option value="2022">2022년</option>
          <option value="2023" selected>2023년</option>
        </select>
        까지 &nbsp;&nbsp;&nbsp;&nbsp; 
        사용 연료
        <select name="fuel">
          <option value="" selected>전체</option>
          <option value="휘발유">휘발유</option>
          <option value="경유">경유</option>
          <option value="전기">전기</option>
          <option value="수소">수소</option>
          <option value="하이브리드">하이브리드</option>
          <option value="기타">기타</option>
        </select><br>
        주행거리
        <input type="number" class="shortmile" name="shortmile" value="0" required onfocus="if(this.value=='0') this.value='';" onblur="if(this.value=='') this.value='0';">
        km ~
        <input type="number" class="longmile" name="longmile" value="5000000" required onfocus="if(this.value=='10000000000') this.value='';" onblur="if(this.value=='') this.value='10000000000';">km
<br>
        <button type="submit" class="search">검색</button><br />
      </div>

    </form>
  </div>
  <!-- <script>
    const lowpriceInput = document.getElementById('lowprice-input');

lowpriceInput.addEventListener('focus', function() {
  if (this.value === '0') {
    this.value = '';
  }
});

lowpriceInput.addEventListener('blur', function() {
  if (this.value === '') {
    this.value = '0';
  }
});
  </script> -->

  <div class="bigbox" id="list">
    <h1>전체 차량</h1>
    <br />
    <ul>
      <% twits.forEach(function(twit) { %>
      <li>
        <% console.log('twit.user_id =') %>
        <a href="/car/detail/<%= twit.carNum %>">
          <div
            class="listbox"
            id="<%= isMine === twit.user_id ? 'highlight' : '' %>"
          >
          <!-- <div class="check"> -->
            <img src="<%= twit.picture[0].url %>" alt="" class="thumbnail" />
            <div class="like">
              <input type="checkbox">
              <%= twit.likes_count %>
            <!-- </div> -->
            </div>
        
            <div class="text-box">
              <div> <%= twit.from %> <%= twit.brand %> <%= twit.model %> </div>
      
              <div><%= twit.fuel %> <%= twit.year %>년식</div>
              <div>  </div>
              <div class="hash"><%= twit.hashtag %></div>
              <div class="hash"><%= twit.hashtag %></div>
              <div class="hash"><%= twit.hashtag %></div>
              <div class="hash"><%= twit.hashtag %></div>
            </div>
           
          </div>
        </a>
      </li>
      <% }) %>
    </ul>

    <% if (totalPages > 1) { %>
    <div>
      <% let start = Math.ceil(currentPage / 10) * 10 - 9; let end =
      Math.min(start + 9, totalPages); %> <% if (start > 1) { %>
      <a href="/car/findcar?page=1">첫 페이지</a>
      <% } %> <% if (currentPage > 10) { %>
      <a href="/car/findcar?page=<%= start - 1 %>">이전</a>
      <% } %> <% for(let i=start; i<=end; i++) { %> <% if(i === currentPage) {
      %>
      <strong style="font-size: 30px"><%= i %></strong>
      <% } else { %>
      <a href="/car/findcar?page=<%= i %>"><%= i %></a>
      <% } %> <% } %> <% if (end < totalPages) { %>
      <a href="/car/findcar?page=<%= end + 1 %>">다음</a>
      <% } %> <% if (end < totalPages - 9) { %>
      <a href="/car/findcar?page=<%= totalPages %>">마지막 페이지</a>
      <% } %>
    </div>
    <% } %>
  </div>
</div>


<script>
  const fromSelect = document.querySelector('#from');
  const brandSelect = document.querySelector('#brand');

  fromSelect.addEventListener('change', () => {
    if (fromSelect.value === "국산") {
    brandSelect.innerHTML = `
        <option value="현대">현대</option>
        <option value="제네시스">제네시스</option>
        <option value="기아">기아</option>
        <option value="쉐보레">쉐보레(GM대우)</option>
        <option value="쌍용">쌍용</option>
        <option value="국산기타">기타</option>
        
    `;
  } else if (fromSelect.value === "수입") {
    brandSelect.innerHTML = `
    <option value="벤츠">벤츠</option>
    <option value="아우디">아우디</option>
    <option value="BMW">BMW</option>
    <option value="볼보">볼보</option>
    <option value="폭스바겐">폭스바겐</option>
    <option value="포르쉐">포르쉐</option>
    <option value="수입기타">기타</option>
    `;
  } else {
    brandSelect.innerHTML = `
      <option value="" selected>국산·수입 선택하세요</option>
    `;
  }
  });
  const transSelect = document.getElementById("trans");
  transSelect.addEventListener("change", function() {
    if (transSelect.value === "") {
      // 전체를 선택한 경우, 다른 모든 옵션을 선택한 것과 같게 처리
      transSelect.selectedIndex = 0;
    }
  });

//   const lowPrice = document.querySelector('#lowprice').value;
// const highPrice = document.querySelector('#highprice').value;
// const shortMile = document.querySelector('#shortmile').value;
// const longMile = document.querySelector('#longmile').value;
</script>